name: Live Rain Stream

on:
  workflow_dispatch:
  schedule:
    - cron: "0 */6 * * *"

permissions:
  contents: read

jobs:
  rain:
    runs-on: ubuntu-latest
    timeout-minutes: 355

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install FFmpeg
        run: sudo apt update && sudo apt install -y ffmpeg

      - name: Start Rain Live Stream
        env:
          RAIN_RTMP: ${{ secrets.RAIN_RTMP }}
        run: bash rain/stream.sh
